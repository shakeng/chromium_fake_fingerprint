<!DOCTYPE html>
<title>Test popup menu positioned correctly after layout change</title>
<div id="err" style="height:50px; display:block">
  Test select popup positions correctly after an event causes update to select element positioning.
</div>
<select id="menu">
    <option value="one">One</option>
    <option value="two">Two</option>
</select>
<script>
  menu.focus();
  menu.onkeydown = removeError;

  function removeError() {
    err.style.display = 'none';
    if (window.testRunner){
      testRunner.notifyDone();
    }
  }

  if (window.testRunner) {
    testRunner.waitUntilDone();
  }
  eventSender.keyDown(" ", null);
</script>